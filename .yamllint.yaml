---
# yamllint configuration for ESPHome projects
# Based on ESPHome YAML style guide: https://esphome.io/guides/yaml.html

extends: default

rules:
  # ESPHome configurations often have longer lines for complex lambdas,
  # sensor configurations, and comments
    line-length:
        max: 120
        level: error

  # Allow more flexible comment spacing for ESPHome documentation
    comments:
        min-spaces-from-content: 1

  # ESPHome uses truthy values like "on"/"off" which are more readable
  # than strict "true"/"false" in many contexts
    truthy:
        allowed-values: ['true', 'false', on, off, yes, no, 'True', 'False', On, Off, Yes, No]

  # Document start is optional for ESPHome configurations
  # Allow document starts but don't require them (compatible with yamlfmt)
    document-start: disable

  # Allow trailing spaces in some cases (useful for ESPHome templates)
    trailing-spaces:
        level: warning

  # ESPHome configurations can be quite indented with nested structures
    indentation:
        spaces: 2
        indent-sequences: true
        check-multi-line-strings: false

  # Allow empty values for ESPHome placeholders
    empty-values:
        forbid-in-block-mappings: false
        forbid-in-flow-mappings: false

# Ignore paths that contain external dependencies or generated files
ignore: |
    .venv/
    .git/
    *.stl
    *.gcode
    pricing_backup/
