---
# esphome/packages/display-camera.yaml
# Include common display settings
!include display-common.yaml

  - id: camera_display
    pages:
      - id: main_page
        lambda: |-
          // Header
          it.printf(id(display_header_x), id(display_header_y), id(font_small),
                    "Camera Trap %s %s", "${line_voltage}", "${safety_standard}");

          // WiFi Status
          if (id(wifi_component).is_connected()) {
            it.printf(id(display_wifi_status_x), id(display_header_y), id(font_small), "WiFi");
          } else {
            it.printf(id(display_wifi_status_no_net_x), id(display_header_y), id(font_small), "No Net");
          }

          // Sensor Status
          it.printf(id(display_apds_x), id(display_sensor_status_y), id(font_medium), "4-Sensor Hybrid:");
          it.printf(id(display_apds_x), id(display_apds_y), id(font_small),
                    "%s APDS", (id(apds_detection).state ? "âœ“" : "â—‹"));
          it.printf(id(display_tof_x), id(display_apds_y), id(font_small),
                    "%s PIR", (id(pir_detection).state ? "âœ“" : "â—‹"));
          it.printf(id(display_pir_x), id(display_apds_y), id(font_small),
                    "%s ToF", (id(tof_detection).state ? "âœ“" : "â—‹"));
          it.printf(id(display_wifi_status_no_net_x), id(display_apds_y), id(font_small), "ðŸ“·");

          // Master trigger status
          if (id(trap_triggered).state) {
            it.filled_rectangle(id(display_apds_x), id(display_system_status_y), 128, 12, COLOR_ON);
            it.print(2, id(display_system_status_text_y), id(font_small), COLOR_OFF, ">> VACUUM ACTIVE <<");
          } else if (id(emergency_stop).state) {
            it.printf(id(display_apds_x), id(display_system_status_text_y), id(font_small), "EMERGENCY STOP");
          } else if (id(system_armed).state) {
            it.printf(id(display_apds_x), id(display_system_status_text_y), id(font_small), "System Armed - Ready");
          } else {
            it.printf(id(display_apds_x), id(display_system_status_text_y), id(font_small), "System Disarmed");
          }

          // Stats
          it.printf(id(display_apds_x), id(display_stats_y), id(font_small),
                    "Captures: %.0f", id(capture_count).state);
          it.printf(id(display_stats_temp_x), id(display_stats_y), id(font_small),
                    "Temp: %.1fÂ°C", id(env_temperature).state);
          it.printf(id(display_apds_x), 48, id(font_small),
                    "CAM:OK IR:%d%%", (int)id(ir_brightness_number).state);
